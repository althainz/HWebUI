<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>HWebUI</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_HWebUI.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">HWebUI-0.1.0.0: Haskell User Interface Library</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">HWebUI</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Creating the GUI Layout with Yesod Widgets
</a><ul><li><a href="#g:2">How HWebUI Yesod widgets can be used 
</a></li><li><a href="#g:3">Initializing Yesod widget
</a></li><li><a href="#g:4">The Yesod widgets
</a></li></ul></li><li><a href="#g:5">Creating the GUI Functionality with FRP
</a><ul><li><a href="#g:6">How HWebUI wires (based on netwire) work
</a></li><li><a href="#g:7">The netwire wires (basic functionality)
</a></li><li><a href="#g:8">functions to extend basic wires with additional functionality
</a></li></ul></li><li><a href="#g:9">Running the GUI
</a><ul><li><a href="#g:10">How to run the GUI
</a></li><li><a href="#g:11">Functions to run the GUI  
</a></li><li><a href="#g:12">Miscellaneous
</a></li></ul></li><li><a href="#g:13">Implementation Details
</a><ul><li><a href="#g:14">Communication between Javascript/HTML Widget world and FRP Wire world
</a></li><li><a href="#g:15">The background server process (built on top of Yesod)
</a></li><li><a href="#g:16">Widget Implementation
</a></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>HWebUI is providing FRP-based GUI functionality for Haskell by utilizing the Web-Browser. It is build on top of Yesod for the Web technologies and on netwire for the FRP interface. The status is &quot;early prototype&quot;. The implementation uses a Javascript library (Dojo toolkit) for providing typical widgets, HTML for the layout of the widgets. With Javascript and websockets events are transferred between the Web and the Haskell world. This happens behind the scenes. The Haskell programmer is using a FRP based interface. See also: <a href="http://www.github.com/althainz/HWebUI">http://www.github.com/althainz/HWebUI</a>.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:wInitGUI">wInitGUI</a> :: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Server.html#t:HWebUIWidget">HWebUIWidget</a></li><li class="src short"><a href="#v:wButton">wButton</a> :: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Server.html#t:HWebUIWidget">HWebUIWidget</a></li><li class="src short"><a href="#v:wCheckBox">wCheckBox</a> :: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Server.html#t:HWebUIWidget">HWebUIWidget</a></li><li class="src short"><a href="#v:wHtml">wHtml</a> :: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Server.html#t:HWebUIWidget">HWebUIWidget</a></li><li class="src short"><a href="#v:wMultiSelect">wMultiSelect</a> :: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Server.html#t:HWebUIWidget">HWebUIWidget</a></li><li class="src short"><a href="#v:wNumberTextBox">wNumberTextBox</a> :: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Server.html#t:HWebUIWidget">HWebUIWidget</a></li><li class="src short"><a href="#v:wRadioButton">wRadioButton</a> :: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Server.html#t:HWebUIWidget">HWebUIWidget</a></li><li class="src short"><a href="#v:wTextBox">wTextBox</a> :: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Server.html#t:HWebUIWidget">HWebUIWidget</a></li><li class="src short"><a href="#v:buttonW">buttonW</a> ::  <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="HWebUI.html#t:GUIWire">GUIWire</a> a a, <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a>)</li><li class="src short"><a href="#v:checkBoxW">checkBoxW</a> :: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="HWebUI.html#t:GUIWire">GUIWire</a> (<a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Bool.html#t:Bool">Bool</a>) <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Bool.html#t:Bool">Bool</a>, <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a>)</li><li class="src short"><a href="#v:htmlW">htmlW</a> :: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="HWebUI.html#t:GUIWire">GUIWire</a> (<a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a>) <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a>, <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a>)</li><li class="src short"><a href="#v:multiSelectW">multiSelectW</a> :: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="HWebUI.html#t:GUIWire">GUIWire</a> (<a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> [<a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a>]) [<a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a>], <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a>)</li><li class="src short"><a href="#v:numberTextBoxW">numberTextBoxW</a> :: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="HWebUI.html#t:GUIWire">GUIWire</a> (<a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Prelude.html#t:Double">Double</a>) <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Prelude.html#t:Double">Double</a>, <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a>)</li><li class="src short"><a href="#v:radioButtonW">radioButtonW</a> :: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="HWebUI.html#t:GUIWire">GUIWire</a> (<a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Bool.html#t:Bool">Bool</a>) <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Bool.html#t:Bool">Bool</a>, <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a>)</li><li class="src short"><a href="#v:textBoxW">textBoxW</a> :: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="HWebUI.html#t:GUIWire">GUIWire</a> (<a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a>) <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a>, <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a>)</li><li class="src short"><a href="#v:runHWebUI">runHWebUI</a> ::  <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a> -&gt; GWidget <a href="Server.html#t:Webgui">Webgui</a> <a href="Server.html#t:Webgui">Webgui</a> () -&gt; Wire e <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> () b -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><span class="keyword">data</span>  <a href="#t:GSChannel">GSChannel</a> </li><li class="src short"><span class="keyword">type</span> <a href="#t:GUIWire">GUIWire</a> a b = Wire <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> a b</li></ul></div><div id="interface"><h1 id="g:1">Creating the GUI Layout with Yesod Widgets
</h1><h2 id="g:2">How HWebUI Yesod widgets can be used 
</h2><div class="doc"><p>Yesod provides a mechanism, to combine Javascript, HTML and Templating to build a powerful abstraction for Widgets. Within HWebUI this 
mechanism is used to build the GUI Layout from single elements. Basically, HWebUI provides Yesod widgets, which you can incorporate directly
into HTML to obtain your GUI Layout. Those Yesod widgets include already all needed Javascript and HTML functionality for the individual
GUI Elements. 
</p><p>Each HWebUI program has the following sections: settings, create layout, create functionality, run GUI. Here we focus on the section: create layout.
</p><p>Take as example the layout part of the currency converter application example:
</p><pre>    let guiLayout = do    
        wInitGUI port
        
        toWidget [hamlet|
              &lt;H1&gt;HWebUI - Currency Example
              &lt;p&gt;
                    |]

        [whamlet|
           &lt;table&gt;
                   &lt;tr&gt;
                     &lt;td&gt; US Dollars
                     &lt;td&gt; ^{wTextBox &quot;tb-dollars&quot;}
                   &lt;tr&gt;
                     &lt;td&gt; Euros
                     &lt;td&gt; ^{wTextBox &quot;tb-euros&quot;} 
                             |]
</pre><p>You can see nicely, how the guiLayout is composed from Yesod widgets. In the beginning the wInitGUI widget set up needed Javascript libraries. After that you can find GUI element widgets like &quot;wTextBox&quot; interspersed with regular HTML given in hamlet or whamlet notation. In whamlet templates it is even possible, to intermix Yesod widgets with HTML, which makes GUI layout a snap. 
</p></div><h2 id="g:3">Initializing Yesod widget
</h2><div class="top"><p class="src"><a name="v:wInitGUI" class="def">wInitGUI</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>port used to communicate with Haskell server
</p></td></tr><tr><td class="src">-&gt; <a href="Server.html#t:HWebUIWidget">HWebUIWidget</a></td><td class="doc"><p>resulting Yesod widget
</p></td></tr></table></div><div class="doc"><p>Yesod widget to initialize needed Javascript functionality in the HTML code of the GUI. Provides Dojokit inclusion and communication with Haskell Yesod server over websockets.
</p></div></div><h2 id="g:4">The Yesod widgets
</h2><div class="top"><p class="src"><a name="v:wButton" class="def">wButton</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Element Id 
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Label of the Button 
</p></td></tr><tr><td class="src">-&gt; <a href="Server.html#t:HWebUIWidget">HWebUIWidget</a></td><td class="doc"><p>resulting Yesod Widget
</p></td></tr></table></div><div class="doc"><p>Yesod widget for the Button GUI Element
</p></div></div><div class="top"><p class="src"><a name="v:wCheckBox" class="def">wCheckBox</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Element Id
</p></td></tr><tr><td class="src">-&gt; <a href="Server.html#t:HWebUIWidget">HWebUIWidget</a></td><td class="doc"><p>resulting Yesod Widget
</p></td></tr></table></div><div class="doc"><p>Yesod widget for the CheckBox GUI Element
</p></div></div><div class="top"><p class="src"><a name="v:wHtml" class="def">wHtml</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Element Id
</p></td></tr><tr><td class="src">-&gt; <a href="Server.html#t:HWebUIWidget">HWebUIWidget</a></td><td class="doc"><p>resulting Yesod widget
</p></td></tr></table></div><div class="doc"><p>Yesod widget for the PlainHtml GUI element (an element which is used for dynamic HTML output
</p></div></div><div class="top"><p class="src"><a name="v:wMultiSelect" class="def">wMultiSelect</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Element Id
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>Width of widget
</p></td></tr><tr><td class="src">-&gt; <a href="Server.html#t:HWebUIWidget">HWebUIWidget</a></td><td class="doc"><p>resulting Yesod widget
</p></td></tr></table></div><div class="doc"><p>Yesod widget for the MultiSelect GUI element
</p></div></div><div class="top"><p class="src"><a name="v:wNumberTextBox" class="def">wNumberTextBox</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Element Id
</p></td></tr><tr><td class="src">-&gt; <a href="Server.html#t:HWebUIWidget">HWebUIWidget</a></td><td class="doc"><p>resulting Yesod widget
</p></td></tr></table></div><div class="doc"><p>Yesod widget for the NumberTextBox GUI element
</p></div></div><div class="top"><p class="src"><a name="v:wRadioButton" class="def">wRadioButton</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Element Id
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Name
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Value
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>Checked
</p></td></tr><tr><td class="src">-&gt; <a href="Server.html#t:HWebUIWidget">HWebUIWidget</a></td><td class="doc"><p>resulting Yesod widget
</p></td></tr></table></div><div class="doc"><p>Yesod widget for the RadioButtion GUI element
</p></div></div><div class="top"><p class="src"><a name="v:wTextBox" class="def">wTextBox</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Element Id
</p></td></tr><tr><td class="src">-&gt; <a href="Server.html#t:HWebUIWidget">HWebUIWidget</a></td><td class="doc"><p>resulting Yesod widget
</p></td></tr></table></div><div class="doc"><p>Yesod widget for the TextBox GUI element
</p></div></div><h1 id="g:5">Creating the GUI Functionality with FRP
</h1><h2 id="g:6">How HWebUI wires (based on netwire) work
</h2><div class="doc"><p>Obviously there are different possibilities to build a FRP based API for GUI elements with netwire. This implementation is in stage &quot;early prototype&quot; and might serve also as playground to test different designs in this area. The basic wires below all follow the same rules, with regards to notification of changes and setting of values. These rules make up a quite basic mechanism, which can be extended with additional netwire wrappers for more advanced purposes.
</p><p><em>Basic wire behaviour:</em>
</p><p>Each GUI element, which carries a value of Type a (TextBox, CheckBox, ...) has an input type of (Maybe a) and an output type of a. To set a new value of the element as input a &quot;Just a&quot; needs to be given. A &quot;Nothing&quot; as input does not change the value from side of the program. As output the wire fires on each user caused change of the value, not on the case the value gets set by the program. If the value does not change, the wire inhibits (see netwire documentation for that). The reason to choose this model is simply that it is the most basic behaviour, which still contains all information needed and goes with one wire per element.
</p><p><em>How to use the basic wires:</em>
</p><p>The following code from the example-arithmetic show how to create the wires, corresponding to the Yesod widgets.
</p><pre>    -- create netwire gui elements
    let gsmap = (fromList [])::(Map String GSChannel)
        
    (arg1, gsmap) &lt;- textBoxW &quot;arg1&quot; gsmap
    (arg2, gsmap) &lt;- textBoxW &quot;arg2&quot; gsmap
    (addB, gsmap) &lt;- radioButtonW &quot;rbadd&quot; gsmap
    (subB, gsmap) &lt;- radioButtonW &quot;rbsub&quot; gsmap
    (mulB, gsmap) &lt;- radioButtonW &quot;rbmul&quot; gsmap
    (divB, gsmap) &lt;- radioButtonW &quot;rbdiv&quot; gsmap
    (out1, gsmap) &lt;- htmlW &quot;out1&quot; gsmap
</pre><p>The anchor between the Yesod widgets and the netwire wire is the &quot;Element Id&quot;. After the wires have been created, they need to be wired in a way, which implements the wanted functionality. In case of the arithmetic example the wiring is done as follows:
</p><pre>    -- build the FRP wire, arrow notation
    
    let result = proc _ -&gt; do
                              a1 &lt;- hold &quot;&quot; arg1 -&lt; Nothing
                              a2 &lt;- hold &quot;&quot; arg2 -&lt; Nothing
 			       badd &lt;- hold True addB -&lt; Nothing
      			       bsub &lt;- hold False subB -&lt; Nothing
                              bmul &lt;- hold False mulB -&lt; Nothing
                              bdiv &lt;- hold False divB -&lt; Nothing
                               
                              let op = if badd then (+) else (if bsub then (-) else (if bmul then (*) else (if bdiv then (/) else (\ x y -&gt; 0.0))))
                              let res = op (atof a1) (atof a2)

                              returnA -&lt; res                             

    let theWire = out1 .  ((Just . show) &lt;$&gt; result) . pure Nothing
</pre></div><h2 id="g:7">The netwire wires (basic functionality)
</h2><div class="top"><p class="src"><a name="v:buttonW" class="def">buttonW</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Element Id
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a></td><td class="doc"><p>Channel Map (Internal)
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="HWebUI.html#t:GUIWire">GUIWire</a> a a, <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a>)</td><td class="doc"><p>resulting Wire
</p></td></tr></table></div><div class="doc"><p>Basic wire for Button GUI element functionality (output element with dynamic HTML)
</p></div></div><div class="top"><p class="src"><a name="v:checkBoxW" class="def">checkBoxW</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Element Id
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a></td><td class="doc"><p>Channel Map (Internal)
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="HWebUI.html#t:GUIWire">GUIWire</a> (<a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Bool.html#t:Bool">Bool</a>) <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Bool.html#t:Bool">Bool</a>, <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a>)</td><td class="doc"><p>resulting Wire
</p></td></tr></table></div><div class="doc"><p>Basic wire for CheckBox GUI element functionality
</p></div></div><div class="top"><p class="src"><a name="v:htmlW" class="def">htmlW</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Element Id
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a></td><td class="doc"><p>Channel Map (Internal)
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="HWebUI.html#t:GUIWire">GUIWire</a> (<a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a>) <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a>, <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a>)</td><td class="doc"><p>resulting Wire
</p></td></tr></table></div><div class="doc"><p>Basic wire for HTML GUI element functionality (output element with dynamic HTML)
</p></div></div><div class="top"><p class="src"><a name="v:multiSelectW" class="def">multiSelectW</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Element Id
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a></td><td class="doc"><p>Channel Map (Internal)
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="HWebUI.html#t:GUIWire">GUIWire</a> (<a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> [<a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a>]) [<a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a>], <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a>)</td><td class="doc"><p>resulting Wire
</p></td></tr></table></div><div class="doc"><p>Basic wire for MultiSelect GUI element functionality
</p></div></div><div class="top"><p class="src"><a name="v:numberTextBoxW" class="def">numberTextBoxW</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Element Id
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a></td><td class="doc"><p>Channel Map (Internal)
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="HWebUI.html#t:GUIWire">GUIWire</a> (<a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Prelude.html#t:Double">Double</a>) <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Prelude.html#t:Double">Double</a>, <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a>)</td><td class="doc"><p>resulting Wire
</p></td></tr></table></div><div class="doc"><p>Basic wire for NumberTextBox GUI element functionality
</p></div></div><div class="top"><p class="src"><a name="v:radioButtonW" class="def">radioButtonW</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Element Id
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a></td><td class="doc"><p>Channel Map (Internal)
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="HWebUI.html#t:GUIWire">GUIWire</a> (<a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Bool.html#t:Bool">Bool</a>) <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Bool.html#t:Bool">Bool</a>, <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a>)</td><td class="doc"><p>resulting Wire
</p></td></tr></table></div><div class="doc"><p>Basic wire for RadioButton GUI element functionality
</p></div></div><div class="top"><p class="src"><a name="v:textBoxW" class="def">textBoxW</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Element Id
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a></td><td class="doc"><p>Channel Map (Internal)
</p></td></tr><tr><td class="src">-&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> (<a href="HWebUI.html#t:GUIWire">GUIWire</a> (<a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a>) <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a>, <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a>)</td><td class="doc"><p>resulting Wire
</p></td></tr></table></div><div class="doc"><p>Basic wire for TextBox GUI element functionality
</p></div></div><h2 id="g:8">functions to extend basic wires with additional functionality
</h2><div class="doc"><p>to be done
</p></div><h1 id="g:9">Running the GUI
</h1><h2 id="g:10">How to run the GUI
</h2><div class="doc"><p>To run a GUI built with HWebUI, the background webserver needs to be started, which handels the websocket communication with the webbrowser. In addition a loop needs to be called, to run the netwire FRP based GUI api. All this is done by calling the runHWebUI function as shown below.
</p><pre>    -- run the webserver, the netwire loop and wait for termination   
    runHWebUI port gsmap guiLayout theWire
</pre></div><h2 id="g:11">Functions to run the GUI  
</h2><div class="top"><p class="src"><a name="v:runHWebUI" class="def">runHWebUI</a> ::  <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/containers-0.4.2.1/Data-Map.html#t:Map">Map</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/Data-String.html#t:String">String</a> <a href="HWebUI.html#t:GSChannel">GSChannel</a> -&gt; GWidget <a href="Server.html#t:Webgui">Webgui</a> <a href="Server.html#t:Webgui">Webgui</a> () -&gt; Wire e <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> () b -&gt; <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>this function runs the HWebUI web server (the Yesod server), runs the netwire loop and wait for termination
</p></div></div><h2 id="g:12">Miscellaneous
</h2><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:GSChannel" class="def">GSChannel</a>  </p><div class="doc"><p>A two sided message buffer structure  
</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:GUIWire" class="def">GUIWire</a> a b = Wire <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a> <a href="C:\Program Files (x86)\Haskell Platform\2012.4.0.0\lib/../doc/html/libraries/base-4.5.1.0/System-IO.html#t:IO">IO</a> a b</p></div><h1 id="g:13">Implementation Details
</h1><h2 id="g:14">Communication between Javascript/HTML Widget world and FRP Wire world
</h2><div class="doc"><p>The communication between the Browser and the Haskell program running the HWebUI GUI is implemented over one websocket. The basic websocket code is realised in the <a href="Server.html">Server</a> module. Messages are passed back and forth through this one websocket and are stored in between in data structures called Channels. Each GUI element owns it's own channel and there is a channel map, which is indexed by the GUI Element ID. The basic code for the Channels can be found in the <a href="Messaging.html">Messaging</a> module. In this module also the data structure for the <code><a href="Messaging.html#t:GUIMessage">GUIMessage</a></code> data type is defined, which includes  for each message a <code><a href="GUISignal.html#t:GUISignal">GUISignal</a></code>, a <code><a href="GUIValue.html#t:GUIValue">GUIValue</a></code>, a <code><a href="Messaging.html#t:GUIElementType">GUIElementType</a></code> and a <code><a href="Messaging.html#t:GUIElementId">GUIElementId</a></code>. All those data types can be send over the Websocket as JSON data and are used only for internal purpose of this communication channel. The <a href="Messaging.html">Messaging</a> module exports functions to create Channels for messages and send and receive them. 
</p><p>Those functions are used in the <a href="Server.html">Server</a> module, to receive messages from the websocket and push them to the channels of the single GUI elements. Additional functions are used in the FRP wire implementations in the <a href="Wires.html">Wires</a> module to pop the messages from the channels during a receive action. The sending of messages towards the GUI elements works the other way around. Messages are pushed from the FRP code towards the channels and in the <a href="Wires.html">Wires</a> module and in the <a href="Server.html">Server</a> module those messages are pushed through the websocket towards the Browswer.
</p><p>In the Browser Messages are sent and received over JSON sending and receiving. The code for that is located in the <a href="Widgets.html">Widgets</a> module as Javascript implementation. The <code><a href="HWebUI.html#v:wInitGUI">wInitGUI</a></code> widget comes with the Javascript code to reveive JSON messages from the Haskell based backend server and distribute it towards the single GUI elemens. The single widgets contain Javascript code to send JSON messages towards the Haskell based backend server.
</p></div><h2 id="g:15">The background server process (built on top of Yesod)
</h2><div class="doc"><p>To run a web based GUI, we need a background Webserver. In the case of HWebUI this purpose is achieved by leveraging the Yesod webserver. In addition to serving the HTML pages, which build the static framework for the GUI, the Yesod server also provides the mechanism to implement a websockets based communication between the Browser and the Haskell process running the FRP based GUI. All this functionality is implemented in a pilot implementation mode in the <a href="Server.html">Server</a> module. According to this explanation functionality in the <a href="Server.html">Server</a> module is grouped into two parts, one is about providing the HTML/Javascript based landing page for the GUI and one is to accept a connection for a websocket communication and handle this specific communication channel.
</p><p>The function which runs the background server is called <code>runWebserver</code> and it includes both parts, it defines a Yesod settings data structure, which includes the websocket interception option. It also creates the base type of the Yesod server which includes the layout of the landing page. This is needed, since we want flexible layouts for the landing page, not linked to the function running the server. Then it starts the the Yesod server.
</p><p>The functions which implement the websocket communication are the <code>socketAcceptFunction</code>, <code>readSocketLoop</code> and the <code>socketHandlingFunction</code>, which spawns the write loop for writing towards the socket and then calls the <code>readSocketLoop</code> function. The <code>socketAcceptFunction</code> is called given as the anchor function in the websocket configuration inside the <code>runWebserver</code> function.
</p><p>The basic Yesod webserver is implemented the usual way, two annotation may be made: there is a specific base layout defined to include the Dojokit <a href="claro.html">claro</a> style in the body element of the HTML page. Also the layout of the one and only render page is not hard coded but given as a paramter to the configuration, so that it can be implemented later, as can be seen in the examples.
</p></div><h2 id="g:16">Widget Implementation
</h2><div class="doc"><p>The functionality of a widget is a complex combination of different implementation technologies, which all interwork. In the Browser a javascript Dojokit widget is sending and receiving Javascript events. Also in the Browser additional Javascript code transform those events and commands in a format which can be transferred to the backend. Then those events are transferred with the above described messaging mechanism towards the Haskell backend. Finally they are processed and steared towards the corresponding Haskell FRP widget implementation. Below a short description about how to implement a widget might shed some light on the interworking mechanisms.
</p><p><em>How to implement a widget:</em>
</p><p>To implement a widget the following steps needs to be done:
</p><ul><li> Think about the type of the widget. The most widgets which carry a value of type &quot;a&quot; understand commands of the format &quot;Maybe a&quot; to set the value of the widget and send changed values of simply type &quot;a&quot;. In case of more complex widgets additional information might be included in this value, for example the MultiSelect widget encodes also the selection status in the value.
</li><li> Create a Yesod widget for the widget in the <a href="Widgets.html">Widgets</a> module. The Yesod widgets carry the Javascript code for the widget which sends messages upon a change in the widget. For this a &quot;onChange&quot; function needs to be coded in the Javascript of the Yesod widget. This function should send the changed value to the Haskell backend by calling the &quot;sendMessage&quot; function. In addition the Browser based widget needs to be updated in case a command message to do so is sent from the Haskell backend. To make this happen the <code><a href="HWebUI.html#v:wInitGUI">wInitGUI</a></code> function needs to be updated to include widget specific behaviour for the new widget in the &quot;onMessage&quot; function.
</li><li> Create a netwire wire based widget in the <a href="Wires.html">Wires</a> module. You might be able to use the generic implementation of the <code>valueWireGen</code> function in case the widget is of a value type as described above. Sometimes the complete wire needs to be coded independently. The functionality needed for a wire representing a widget in FRP code is to receive messages from the channel and to update the state or to send messages over hte channel in case the value is updated by FRP mechanisms. Look at <code>valueWireGen</code> to get a better understanding of that.
</li><li> Implement a test case to test your new widget.
</li></ul></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.11.0</p></div></body></html>